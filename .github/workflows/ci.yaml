name: Continuous Integration
on: [push]
jobs:
  build:
    runs-on: ubuntu-latest
    steps:
      - name: Check out repository code
        uses: actions/checkout@v2
      - run: UID=$(id -u) GID=$(id -g) docker-compose up --build -d
      - run: docker exec $(docker-compose ps -q gradle) id
      - run: mkdir ./.gradle && chmod -R 777 .
      - run: docker exec $(docker-compose ps -q gradle) gradle :servers:login:build
